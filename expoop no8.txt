Aim: Implement a program for maintaining a student records database using File Handling.
Student has Roll_no, name, Class, and marks. Display the data for all students.
i) Create Database ii)Display Database
iii) Clear Records iv)Modify record v)Search Record
Objectives: To understand the concept of Java FileWriter and FileReader classes.
Theory:
File Operations in Java
In Java, a File is an abstract data type. A named location used to store related information
is known as a File. There are several File Operations like creating a new File, getting information
about File, writing into a File, reading from a File and deleting a File.
Program:
//File MyFile.java
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;
public class MyFile
{
public void appendRecord()
{
try
{
String studentName, studentClass;
int rollNo;
float marks;
Scanner sc1= new Scanner(System.in);
PrintWriter pr= new PrintWriter(new FileWriter("d:\\student.txt",true));
System.out.println("roll number of student");
rollNo = sc1.nextInt();
System.out.println("name of student");
studentName = sc1.next();
System.out.println("class of student");
studentClass = sc1.next();
System.out.println("marks of student");
marks = sc1.nextFloat();
pr.println(rollNo+" "+studentName+" "+studentClass+" "+marks);
System.out.println("Record added successfully");
pr.close();
}
catch(Exception e)
{
System.out.println("Error in append"+ e);
}
}
public void printRecords() throws IOException
{
String record;
FileReader fr= new FileReader("d:\\student.txt");
BufferedReader br = new BufferedReader(fr);
do {
record = br.readLine() ;
if(record != null)
System.out.println(record);
}while(record!= null);
br.close();
}

public void searchRecord(String name) throws IOException, FileNotFoundException
{
String record;
String []fields;
boolean flag=false;
BufferedReader br= new BufferedReader(new FileReader("d:\\student.txt"));
do {
record = br.readLine() ;
if(record != null)
{
fields = record.split(" ");
if ( name.compareToIgnoreCase(fields[1])==0)
{
System.out.println("Record found");
System.out.println(record);
flag =true;
break;
}
}
}while(record!= null);
if(flag== false)
System.out.println("Record not found");
br.close();
}
public void clearAllRecords() throws FileNotFoundException
{
File f = new File("d:\\student.txt");
//f.delete(); It may generate errors in remaining options.
PrintWriter pr= new PrintWriter(f);
pr.close();
}
public void modifyRecord(String name) throws IOException, FileNotFoundException
{
String record;
String []fields;
boolean flag=false;
String studentName, studentClass;
int rollNo;
float marks;
Scanner sc= new Scanner(System.in);
File f = new File("d:\\student1.txt");
File f1 = new File("d:\\student.txt");
PrintWriter pr= new PrintWriter(f);
BufferedReader br= new BufferedReader(new FileReader(f1));

do {
record = br.readLine() ;
if(record != null)
{
fields = record.split(" ");
if ( name.compareToIgnoreCase(fields[1])==0 && flag ==false)
{
System.out.println("new roll number of student");
rollNo = sc.nextInt();
System.out.println("new name of student");
studentName = sc.next();
System.out.println("new class of student");
studentClass = sc.next();
System.out.println("new marks of student");
marks = sc.nextFloat();
pr.println(rollNo+" "+studentName+" "+studentClass+" "+marks);
System.out.println("Record updated successfully");
flag =true;
}
else
{
pr.println(record);
}
}
}while(record!= null);
if(flag== false)
System.out.println("Record not found");
br.close();
pr.close();
f1.delete();
f.renameTo(f1);
}
}
//File TestFile.java
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;
public class TestFIle {
public static void main(String[] args) throws IOException, FileNotFoundException
{
MyFile f= new MyFile();
int ch=0;
String name;
Scanner sc= new Scanner(System.in);

do

{
System.out.println("Enter");
System.out.println("1: for add record ");
System.out.println("2: for search record");
System.out.println("3: for display file");
System.out.println("4: for modify a record");
System.out.println("5: for clear file");
System.out.println("6: for terminate");
System.out.println("Enter your choice...");
ch = sc.nextInt();
switch(ch)
{
case 1:
f.appendRecord();
break;
case 2:
System.out.println("Enter name of student to search:");
name= sc.next();
f.searchRecord(name);
break;
case 3:
f.printRecords();
break;
case 4:
System.out.println("Enter name of student to modify:");
name= sc.next();
f.modifyRecord(name);
break;
case 5:
f.clearAllRecords();
break;
case 6:
System.out.println("Terminating the program");
break;
default:
System.out.println("Wrong choice...");
}
}while(ch != 6);
}
}